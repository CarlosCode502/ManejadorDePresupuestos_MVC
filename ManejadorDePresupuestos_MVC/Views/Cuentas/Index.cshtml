@*
    //V#127 Indice de Cuentas - Query (Creando la vista Index)
*@

@model IEnumerable<IndiceCuentasViewModel>

@{
    ViewData["Title"] = "Cuentas";

    //Pequeña función para centralizar los balances y especificar un tipo de formato
    string formatearBalance(decimal balance)
    {
        // return Math.Abs(balance).ToString("N");
        return Math.Abs(balance).ToString("Q 00,00.00");
    }
}

<h1>Cuentas</h1> 

@* Este anchor redirige desde la pag ver cuentas hacia crear *@
<a asp-action="Crear" class="btn btn-primary mb-3">Crear nueva</a>

@* //V#128 Indice de Cuentas - Query (Completando la vista Index) *@
<div class="contenedor-totales mb-3">
    <div>
        <div>
            <strong>Activos</strong>
        </div>
        <div class="activos">
            @* Obtiene todos los balances positivos. *@
            @formatearBalance(Model.Where(x => x.Balance > 0).Sum(x => x.Balance))
        </div>
    </div>
    <div>
        <div>
            <strong>Pasivos</strong>
        </div>
        <div class="pasivos">
            @* Obtiene todos los balances negativos *@
            @formatearBalance(Model.Where(x => x.Balance < 0).Sum(x => x.Balance))
        </div>
    </div>
    <div>
        <div>
            <strong>Total</strong>
        </div>
        <div class="totales">
            @* Obtiene la suma total entre los balances positivos y negativos. *@
            @formatearBalance(Model.Sum(x => x.Balance))
        </div>
    </div>
</div>
